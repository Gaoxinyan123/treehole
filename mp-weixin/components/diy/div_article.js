(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/diy/div_article"],{2708:function(e,t,i){"use strict";var c=i("e061"),o=i.n(c);o.a},e061:function(e,t,i){},e275:function(e,t,i){"use strict";i.r(t);var c,o={uniTag:function(){return i.e("components/uni-tag/uni-tag").then(i.bind(null,"d719"))},uniIcons:function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-icons/uni-icons")]).then(i.bind(null,"2ba4"))}},r=function(){var e=this,t=e.$createElement,i=(e._self._c,e.$toTime(e.obj[e.vm.create_time],"yyyy-MM-dd hh:mm:ss")),c=e.$setRichTextImage(e.obj[e.vm.content]),o=e.$check_action("/praise/list","add")&&!e.check_praised,r=e.$check_action("/praise/list","del")&&e.check_praised,s=e.$check_action("/collect/list","add")&&!e.check_collected,l=e.$check_action("/collect/list","del")&&e.check_collected;e.$mp.data=Object.assign({},{$root:{m0:i,m1:c,m2:o,m3:r,m4:s,m5:l}})},s=[],l={props:{obj:{type:Object,default:function(){return{}}},vm:{type:Object,default:function(){return{img:"img",tag:"tag",url:"url",title:"title",source:"source",description:"description",content:"content",create_time:"create_time",hits:"hits",praise_len:"praise_len"}}}},data:function(){return{check_praised:!1,check_collected:!1}},methods:{get_praise:function(){var e=this,t=this.$store.state.user.user_id;this.$get(getApp().globalData.host+"/api/praise/count?",{source_table:"article",source_field:"article_id",source_id:this.obj.article_id,user_id:t},(function(t){t.result||0===t.result?(e.check_praised=!!t.result,console.log("点赞状态：",t.result)):t.error&&(e.$toast(t.error.message),console.error(t.error))}))},add_praise:function(){var e=this,t={source_table:"article",source_field:"article_id",source_id:this.obj.article_id,user_id:this.$store.state.user.user_id},i=this;this.check_praised?(this.check_praised=!1,this.$get(getApp().globalData.host+"/api/praise/del",t,(function(t){e.obj.praise_len-=1,console.log(t),e.$post(getApp().globalData.host+"/api/article/set?article_id="+i.obj.article_id,{praise_len:i.obj.praise_len},(function(e){e.result?console.log("添加点赞数状态：",e.result):e.error&&console.error(e.error)}))}))):(i.check_praised=!0,this.$post(getApp().globalData.host+"/api/praise/add?",t,(function(t){i.obj.praise_len+=1,console.log(t),e.$post(getApp().globalData.host+"/api/article/set?article_id="+i.obj.article_id,{praise_len:i.obj.praise_len},(function(e){e.result?console.log("添加点赞数状态：",e.result):e.error&&console.error(e.error)}))})))},get_collect:function(e){var t=this,i=this.$store.state.user.user_id,c={source_table:"article",source_field:"article_id",source_id:e["article_id"],user_id:i};this.$get("~/api/collect/count?",c,(function(e){if(console.log(e),e.result||0===e.result){var i=!!e.result;t.check_collected=i,console.log("收藏状态："+i)}else e.error&&console.error(e.error)}))},add_collect:function(){var e=this,t=this.obj,i=t.title,c=t.img,o=t.article_id,r={title:i,img:c,source_table:"article",source_field:"article_id",source_id:o,user_id:this.$store.state.user.user_id};this.check_collected?(this.check_collected=!1,this.$get("~/api/collect/del",r,(function(t){e.$toast("取消收藏")}))):(this.check_collected=!0,this.$post("~/api/collect/add?",r,(function(t){e.$toast("收藏成功"),console.log(t)})))}},computed:{praise_len:function(){return this.obj.praise_len}},created:function(){var e=this;setTimeout((function(){e.get_praise(),e.get_collect()}),1e3)}},a=l,n=(i("2708"),i("f0c5")),u=Object(n["a"])(a,r,s,!1,null,"2ab192f0",null,!1,o,c);t["default"]=u.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/diy/div_article-create-component',
    {
        'components/diy/div_article-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("e275"))
        })
    },
    [['components/diy/div_article-create-component']]
]);
