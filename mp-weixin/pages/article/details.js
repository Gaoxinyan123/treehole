(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/article/details"],{baa4:function(t,e,i){},bf30:function(t,e,i){"use strict";i.r(e),function(t){i("6cdc"),i("66fd");var e=i("e72d");wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e["a"])}.call(this,i("543d")["createPage"])},c941:function(t,e,i){"use strict";var n=i("baa4"),c=i.n(n);c.a},e72d:function(t,e,i){"use strict";var n,c={uniCard:function(){return i.e("components/uni-card/uni-card").then(i.bind(null,"cfb0"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.$check_action("/article/details","get")),n=i?t.$check_action("/comment/list","get"):null,c=i?t.$check_action("/comment/list","get"):null,o=i?t.$check_action("/comment/list","add"):null;t.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:c,m3:o}})},a=[],l=i("f41a"),r=l["a"],s=(i("c941"),i("f0c5")),u=Object(s["a"])(r,o,a,!1,null,null,null,!1,c,n);e["a"]=u.exports},f41a:function(t,e,i){"use strict";(function(t){var n=i("dc88"),c=function(){i.e("components/diy/bar_title").then(function(){return resolve(i("a3ca"))}.bind(null,i)).catch(i.oe)},o=function(){i.e("components/diy/list_article").then(function(){return resolve(i("948a"))}.bind(null,i)).catch(i.oe)},a=function(){i.e("components/diy/div_article").then(function(){return resolve(i("e275"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/diy/list_comment").then(function(){return resolve(i("0ff7"))}.bind(null,i)).catch(i.oe)};e["a"]={mixins:[n["a"]],components:{bar_title:c,list_article:o,div_article:a,list_comment:l},data:function(){return{url_get_obj:getApp().globalData.host+"/api/article/get_obj?",field:"article_id",query:{article_id:0},obj:{article_id:0,title:"",type:"",hits:0,create_time:"",update_time:"",source:"",url:"",tag:"",content:"",img:"",description:"",praise_len:0},list_article:[],list_comment:[],form:{content:""},form_comment:{source_table:"article",source_field:"article_id",source_id:0,reply_to_id:0}}},methods:{onEditorReady:function(){var e=this;t.createSelectorQuery().select("#editor").context((function(t){e.editorCtx=t.context,e.editorCtx.setContents({html:e.form.content,success:function(t){console.log(t)},fail:function(t){console.log(t)}})})).exec()},get_article:function(){var t=this;this.$get(getApp().globalData.host+"/api/article/get_list?",{page:1,size:2},(function(e){if(e.result){var i=e.result.list;t.list_article=i}}))},get_comment:function(){var t=this,e=getCurrentPages()[getCurrentPages().length-1].options,i={source_table:"article",source_field:"article_id",source_id:e.article_id,orderby:"create_time desc",reply_to_id:"0"};this.$get(getApp().globalData.host+"/api/comment/get_list?",i,(function(e){if(e.result){var i=e.result.list;i.map((function(t){t.list_reply=[]})),t.add_reply(i).then((function(e){t.list_comment=e}))}}))},add_reply:function(t){var e=this;return new Promise((function(i){for(var n=function(i){var n=t[i];e.$get(getApp().globalData.host+"/api/comment/get_list?",{source_table:"article",source_field:"article_id",source_id:n.article_id,orderby:"create_time desc",reply_to_id:n.comment_id},(function(t){t.result&&(n.list_reply=t.result.list)}))},c=0;c<t.length;c++)n(c);i(t)})).catch((function(t){}))},editorChange:function(t){this.gongsijieshao=t.detail.html},get_obj_after:function(t){this.add_hits(this.obj);var e=this.obj;this.get_comment(e),this.form_comment.source_id=e.article_id},add_hits:function(t){this.$post(getApp().globalData.host+"/api/article/set?article_id="+t.article_id,{hits:t.hits+1},(function(e){t.hits+=1,console.log(e)}))}},onLoad:function(){this.get_article(),this.get_comment()}}}).call(this,i("543d")["default"])}},[["bf30","common/runtime","common/vendor"]]]);