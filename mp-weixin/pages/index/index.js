(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"5afc":function(e,t,i){"use strict";var l=i("760d"),s=i.n(l);s.a},"760d":function(e,t,i){},d537:function(e,t,i){"use strict";i.r(t),function(e){i("6cdc"),i("66fd");var t=i("f75a");wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t["a"])}.call(this,i("543d")["createPage"])},f75a:function(e,t,i){"use strict";var l,s=function(){var e=this,t=e.$createElement,i=(e._self._c,e.$check_action("/article/list","get")),l=e.$check_action("/tree_hole_release/list","get");e.$mp.data=Object.assign({},{$root:{m0:i,m1:l}})},n=[],o=i("dc88");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a,c=function(){i.e("components/diy/list_tree_hole_release").then(function(){return resolve(i("6ff0"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/common/card").then(function(){return resolve(i("3616"))}.bind(null,i)).catch(i.oe)},_=function(){i.e("components/diy/bar_title").then(function(){return resolve(i("a3ca"))}.bind(null,i)).catch(i.oe)},g=function(){Promise.all([i.e("common/vendor"),i.e("components/diy/list_menu")]).then(function(){return resolve(i("d457"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/diy/list_article").then(function(){return resolve(i("948a"))}.bind(null,i)).catch(i.oe)},p=function(){i.e("components/common/slide").then(function(){return resolve(i("9484"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/common/notice").then(function(){return resolve(i("7f48"))}.bind(null,i)).catch(i.oe)},f={mixins:[o["a"]],components:{list_tree_hole_release:c,Card:u,bar_title:_,list_menu:g,list_article:h,Slide:p,Notice:d},data:function(){return{isSmall:!1,sendValue:"",chatList:[],showChat:!1,isAdmin:!1,token:"",scrollTop:0,oldScrollTop:0,str:"<div>测试一下</div>",list_tree_hole_release:[],list_slide:[],list_article:[],list_menu:[],list_notice:[]}},methods:{toToggle:function(){this.isAdmin=!this.isAdmin},get_tree_hole_release:function(){var e=this,t=getApp().globalData.host+"/api/tree_hole_release/get_list?";t=getApp().globalData.host+"/api/tree_hole_release/get_list?orderby=hits desc";var i={page:1,size:12};this.$get(t,i,(function(t){t.result&&t.result.list&&(console.log("树洞发布",t.result.list),e.list_tree_hole_release=t.result.list,e.list_tree_hole_release.map((function(e){e["praise_len"]})),e.get_praise(e.list_tree_hole_release,"tree_hole_release","tree_hole_release_id"))}))},dateFormat:function(e){var t=new Date,i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var l in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+l+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[l]:("00"+i[l]).substr((""+i[l]).length)));return e},get_slides:function(){var e=this;this.$get(getApp().globalData.host+"/api/slides/get_list?",{},(function(t){t.result&&t.result.list&&(console.log("轮播图",t.result.list),e.list_slide=t.result.list,e.list_slide.map((function(e){e["praise_len"]})),e.get_praise(e.list_slides,"slides","slides_id"))}))},get_menu:function(){var e,t=this,i=this.$store.state.user.user_group;this.$get(getApp().globalData.host+"/api/auth/get_list?",(e={size:"0",get:"",user_group:i},r(e,"get",1),r(e,"position","top"),e),(function(e){e.result&&e.result.list&&(t.list_menu=e.result.list,t.list_menu.map((function(e){e["praise_len"]})),t.get_praise(t.list_auth,"auth","auth_id"))}))},get_article:function(){var e=this;this.$get(getApp().globalData.host+"/api/article/get_list?",{page:1,size:6},(function(t){console.log(t,5666),t.result&&t.result.list&&(console.log("文章",t.result.list),e.list_article=t.result.list,e.list_article.map((function(e){e["praise_len"]})),e.get_praise(e.list_article,"article","article_id"))}))},get_notice:function(){var e=this;this.$get(getApp().globalData.host+"/api/notice/get_list?",{page:1,size:3},(function(t){t.result&&t.result.list&&(console.log("公告",t.result.list),e.list_notice=t.result.list,e.list_notice.map((function(e){e["praise_len"]})),e.get_praise(e.list_notice,"notice","notice_id"),console.log(e.list_notice))}))},get_praise:function(e,t,i){if(e){for(var l=0;l<e.length;l++)e[l].praise_len=0;this.$get(getApp().globalData.host+"/api/praise/list_group?source_table="+t+"&groupby=source_id",{},(function(t){t.result&&t.result.list?t.result.list.map((function(t){for(var l=0;l<e.length;l++){var s=e[l];if(s[i]===t["source_id"]){s["praise_len"]=t["count"];break}}})):t.error&&console.error(t.error)}))}}},onShow:function(){this.get_tree_hole_release(),this.get_menu(),this.get_slides(),this.get_article(),this.get_notice()}},m=f,b=(i("5afc"),i("f0c5")),v=Object(b["a"])(m,s,n,!1,null,"07bdf9ad",null,!1,l,a);t["a"]=v.exports}},[["d537","common/runtime","common/vendor"]]]);